<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Timetable Scheduler</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #eef6fa;
      padding: 30px;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    form {
      max-width: 900px;
      margin: auto;
    }
    .section {
      background: #fff;
      padding: 20px;
      margin-bottom: 25px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 15px;
      padding: 10px 16px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #2980b9;
    }
    .input-group {
      margin-bottom: 15px;
    }
    .checkbox-group label {
      display: inline-block;
      margin-right: 15px;
      font-weight: normal;
    }
  </style>
</head>
<body>

<h1>Schedule Input Form</h1>

<form action="/generate" method="post">

  <!-- Working Days -->
  <div class="section">
    <h3>Working Days</h3>
    <div class="checkbox-group">
      {% for day in ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %}
        <label><input type="checkbox" name="working_days" value="{{ day }}"> {{ day }}</label>
      {% endfor %}
    </div>
  </div>

  <!-- Time Range -->
  <div class="section">
    <h3>Time Range</h3>
    <label>Start Time:</label>
    <input type="time" name="start_time" required>

    <label>End Time:</label>
    <input type="time" name="end_time" required>

    <label>Lecture Duration (hours):</label>
    <select name="lecture_duration" required>
      <option value="1">1 Hour</option>
      <option value="2">2 Hours</option>
    </select>
  </div>

  <!-- Subjects -->
  <div class="section">
    <h3>Subjects</h3>
    <div id="subjects">
      <div class="input-group">
        <label>Subject:</label>
        <select name="subject_name[]" required>
          {% for sub in subjects %}
          <option value="{{ sub }}">{{ sub }}</option>
          {% endfor %}
        </select>

        <label>Teacher:</label>
        <select name="teacher[]" required>
          {% for teacher in teachers %}
          <option value="{{ teacher }}">{{ teacher }}</option>
          {% endfor %}
        </select>

        <label>Sessions per week:</label>
        <input type="number" name="sessions[]" min="1" max="10" required>

        <label>Type:</label>
        <select name="type[]">
          <option value="Lecture">Lecture</option>
          <option value="Lab">Lab</option>
        </select>
      </div>
    </div>
    <button type="button" onclick="addSubject()">+ Add Another Subject</button>
  </div>

  <!-- Groups -->
  <div class="section">
    <h3>Student Groups</h3>
    <div id="groups">
      <input type="text" name="groups[]" placeholder="Group Name" required>
    </div>
    <button type="button" onclick="addGroup()">+ Add Group</button>
  </div>

  <!-- Rooms -->
  <div class="section">
    <h3>Rooms</h3>
    <div id="rooms">
      <select name="rooms[]" required>
        {% for room in rooms %}
        <option value="{{ room }}">{{ room }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="button" onclick="addRoom()">+ Add Room</button>
  </div>

  <button type="submit">Generate Schedule</button>
</form>

<!-- JavaScript -->
<script>
  const roomList = {{ rooms | tojson | safe }};

  function addSubject() {
    const container = document.getElementById("subjects");
    const div = document.createElement("div");
    div.classList.add("input-group");
    div.innerHTML = `
      <label>Subject:</label>
      <select name="subject_name[]" required>
        {% for sub in subjects %}
        <option value="{{ sub }}">{{ sub }}</option>
        {% endfor %}
      </select>

      <label>Teacher:</label>
      <select name="teacher[]" required>
        {% for teacher in teachers %}
        <option value="{{ teacher }}">{{ teacher }}</option>
        {% endfor %}
      </select>

      <label>Sessions per week:</label>
      <input type="number" name="sessions[]" min="1" max="10" required>

      <label>Type:</label>
      <select name="type[]">
        <option value="Lecture">Lecture</option>
        <option value="Lab">Lab</option>
      </select>
    `;
    container.appendChild(div);
  }

  function addGroup() {
    const container = document.getElementById("groups");
    const input = document.createElement("input");
    input.type = "text";
    input.name = "groups[]";
    input.required = true;
    input.placeholder = "Group Name";
    container.appendChild(input);
  }

  function addRoom() {
    const container = document.getElementById("rooms");
    const select = document.createElement("select");
    select.name = "rooms[]";
    select.required = true;

    roomList.forEach(room => {
      const option = document.createElement("option");
      option.value = room;
      option.textContent = room;
      select.appendChild(option);
    });

    container.appendChild(select);
  }
</script>

</body>
</html>
